{"ast":null,"code":"import _slicedToArray from\"/Users/roneillabumanlag/GitHub/IXDS2-Project/companion-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/roneillabumanlag/GitHub/IXDS2-Project/companion-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import styled from'styled-components';import{Container,LargeP,PrimaryButton,ClearButton}from'../shared/global';import WorldEvents from'../components/WorldEvents';import StockMarket from'../components/StockMarket';import axios from'axios';import queryString from'query-string';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Grid=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\tdisplay: grid;\\n\\tgrid-template-columns: repeat(3, 1fr);\\n\\tgrid-column-gap: 1rem;\\n\\tpadding: 0 1rem;\\n\"])));var DashboardItem=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\tgrid-column: span 1;\\n\\tpadding: 1rem;\\n\\tbackground-color: white;\\n\\tmargin: 1rem 0;\\n\\toverflow: auto;\\n\\theight: calc(100vh - 75px - 50px - 2rem);\\n\\tborder-radius: 5px;\\n\"])));var RoundCounter=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\tfont-size: 7rem;\\n\\tmargin: 2rem 0;\\n\\tfont-family: ohno-blazeface, sans-serif;\\n\\tfont-weight: 700;\\n\\tcolor: #f0c418;\\n\"])));var Modal=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\tbackground-color: #fff;\\n\\tposition: absolute;\\n\\tleft: 0;\\n\\tright: 0;\\n\\tborder: #ccc solid 1px;\\n\\tmargin: 1rem auto;\\n\\twidth: 100%;\\n\\tmax-width: 500px;\\n\\tpadding: 1rem;\\n\\tborder-radius: 5px;\\n\\tcolor: #000;\\n\\ttext-align: center;\\n\"])));var RoundTrackerContainer=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\tbackground-color: #fef9e6;\\n\\tcolor: #f0c418;\\n\\twidth: 100%;\\n\\tpadding: 1rem;\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\tflex-direction: column;\\n\\talign-items: center;\\n\\theight: 100%;\\n\"])));var ButtonContainer=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\"])));var ButtonsContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: space-between;\\n\\talign-items: center;\\n\\n\\t& \",\" {\\n\\t\\tmargin: 1rem 0;\\n\\t}\\n\"])),PrimaryButton);var GameStrip=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n\\twidth: 100%;\\n\\tbackground-color: #f0c418;\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n\\tpadding: 0.5rem 1rem;\\n\\tfont-size: 1.25rem;\\n\"])));var Gamemaster=function Gamemaster(_ref){var location=_ref.location;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),roundCount=_useState2[0],setRoundCount=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openDialog=_useState4[0],setOpenDialog=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),servername=_useState8[0],setServername=_useState8[1];var history=useHistory();useEffect(function(){var _queryString$parse=queryString.parse(location.search),username=_queryString$parse.username,servername=_queryString$parse.servername;setUsername(username);setServername(servername);console.log(roundCount);},[]);var updateDb=function updateDb(e){e.preventDefault();setRoundCount(roundCount+1);var roundCounter={roundcounter:roundCount+1};axios.post('http://localhost:5000/serverRoom/updateRound/'+servername,roundCounter).then(function(res){console.log(res.data);});};var endGame=function endGame(){axios.delete('http://localhost:5000/serverRoom/'+servername).then(function(res){console.log(res.data);});history.push('/play-again');};return/*#__PURE__*/_jsxs(Container,{style:{padding:'0'},children:[/*#__PURE__*/_jsxs(GameStrip,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Server: \",servername]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'700'},children:[username,\"'s Dashboard\"]}),/*#__PURE__*/_jsx(\"span\",{children:\"Population:\"})]}),/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(DashboardItem,{style:{padding:'0rem'},children:/*#__PURE__*/_jsxs(RoundTrackerContainer,{children:[/*#__PURE__*/_jsx(LargeP,{children:\" Round Tracker\"}),/*#__PURE__*/_jsxs(RoundCounter,{children:[\" \",roundCount]}),/*#__PURE__*/_jsxs(ButtonsContainer,{children:[/*#__PURE__*/_jsx(PrimaryButton,{onClick:updateDb,children:\"Next Round\"}),/*#__PURE__*/_jsx(ClearButton,{onClick:function onClick(){return setOpenDialog(true);},children:\"End Game\"})]}),openDialog===true?/*#__PURE__*/_jsxs(Modal,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Are you sure you want to end the game?\"}),/*#__PURE__*/_jsxs(ButtonContainer,{children:[/*#__PURE__*/_jsx(PrimaryButton,{onClick:function onClick(){return setOpenDialog(false);},children:\"No, continue game\"}),/*#__PURE__*/_jsx(PrimaryButton,{onClick:endGame,children:\"Yes, end game\"})]})]}):null]})}),/*#__PURE__*/_jsx(DashboardItem,{children:/*#__PURE__*/_jsx(WorldEvents,{roundCounter:roundCount})}),/*#__PURE__*/_jsx(DashboardItem,{children:/*#__PURE__*/_jsx(StockMarket,{roundCounter:roundCount})})]})]});};export default Gamemaster;","map":{"version":3,"sources":["/Users/roneillabumanlag/GitHub/IXDS2-Project/companion-app/frontend/src/pages/Gamemaster.js"],"names":["React","useEffect","useState","useHistory","styled","Container","LargeP","PrimaryButton","ClearButton","WorldEvents","StockMarket","axios","queryString","Grid","div","DashboardItem","RoundCounter","h1","Modal","RoundTrackerContainer","ButtonContainer","ButtonsContainer","GameStrip","Gamemaster","location","roundCount","setRoundCount","openDialog","setOpenDialog","username","setUsername","servername","setServername","history","parse","search","console","log","updateDb","e","preventDefault","roundCounter","roundcounter","post","then","res","data","endGame","delete","push","padding","fontWeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport styled from 'styled-components';\nimport {\n\tContainer,\n\tLargeP,\n\tPrimaryButton,\n\tClearButton,\n} from '../shared/global';\nimport WorldEvents from '../components/WorldEvents';\nimport StockMarket from '../components/StockMarket';\nimport axios from 'axios';\nimport queryString from 'query-string';\n\nconst Grid = styled.div`\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgrid-column-gap: 1rem;\n\tpadding: 0 1rem;\n`;\n\nconst DashboardItem = styled.div`\n\tgrid-column: span 1;\n\tpadding: 1rem;\n\tbackground-color: white;\n\tmargin: 1rem 0;\n\toverflow: auto;\n\theight: calc(100vh - 75px - 50px - 2rem);\n\tborder-radius: 5px;\n`;\n\nconst RoundCounter = styled.h1`\n\tfont-size: 7rem;\n\tmargin: 2rem 0;\n\tfont-family: ohno-blazeface, sans-serif;\n\tfont-weight: 700;\n\tcolor: #f0c418;\n`;\n\nconst Modal = styled.div`\n\tbackground-color: #fff;\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tborder: #ccc solid 1px;\n\tmargin: 1rem auto;\n\twidth: 100%;\n\tmax-width: 500px;\n\tpadding: 1rem;\n\tborder-radius: 5px;\n\tcolor: #000;\n\ttext-align: center;\n`;\n\nconst RoundTrackerContainer = styled.div`\n\tbackground-color: #fef9e6;\n\tcolor: #f0c418;\n\twidth: 100%;\n\tpadding: 1rem;\n\tdisplay: flex;\n\tjustify-content: center;\n\tflex-direction: column;\n\talign-items: center;\n\theight: 100%;\n`;\n\nconst ButtonContainer = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n`;\n\nconst ButtonsContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\talign-items: center;\n\n\t& ${PrimaryButton} {\n\t\tmargin: 1rem 0;\n\t}\n`;\n\nconst GameStrip = styled.div`\n\twidth: 100%;\n\tbackground-color: #f0c418;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 0.5rem 1rem;\n\tfont-size: 1.25rem;\n`;\n\nconst Gamemaster = ({ location }) => {\n\tconst [roundCount, setRoundCount] = useState(1);\n\tconst [openDialog, setOpenDialog] = useState(false);\n\tconst [username, setUsername] = useState('');\n\tconst [servername, setServername] = useState('');\n\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tconst { username, servername } = queryString.parse(location.search);\n\t\tsetUsername(username);\n\t\tsetServername(servername);\n\t\tconsole.log(roundCount);\n\t}, []);\n\n\tconst updateDb = (e) => {\n\t\te.preventDefault();\n\n\t\tsetRoundCount(roundCount + 1);\n\n\t\tconst roundCounter = {\n\t\t\troundcounter: roundCount + 1,\n\t\t};\n\n\t\taxios\n\t\t\t.post(\n\t\t\t\t'http://localhost:5000/serverRoom/updateRound/' + servername,\n\t\t\t\troundCounter\n\t\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t});\n\t};\n\n\tconst endGame = () => {\n\t\taxios\n\t\t\t.delete('http://localhost:5000/serverRoom/' + servername)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t});\n\n\t\thistory.push('/play-again');\n\t};\n\n\treturn (\n\t\t<Container\n\t\t\tstyle={{\n\t\t\t\tpadding: '0',\n\t\t\t}}>\n\t\t\t<GameStrip>\n\t\t\t\t<span>Server: {servername}</span>\n\t\t\t\t<span style={{ fontWeight: '700' }}>{username}'s Dashboard</span>\n\t\t\t\t<span>\n\t\t\t\t\tPopulation:\n\t\t\t\t\t{/* TOD: get population via axios */}\n\t\t\t\t</span>\n\t\t\t</GameStrip>\n\t\t\t<Grid>\n\t\t\t\t<DashboardItem style={{ padding: '0rem' }}>\n\t\t\t\t\t<RoundTrackerContainer>\n\t\t\t\t\t\t<LargeP> Round Tracker</LargeP>\n\t\t\t\t\t\t<RoundCounter> {roundCount}</RoundCounter>\n\t\t\t\t\t\t<ButtonsContainer>\n\t\t\t\t\t\t\t<PrimaryButton onClick={updateDb}>Next Round</PrimaryButton>\n\t\t\t\t\t\t\t<ClearButton onClick={() => setOpenDialog(true)}>\n\t\t\t\t\t\t\t\tEnd Game\n\t\t\t\t\t\t\t</ClearButton>\n\t\t\t\t\t\t</ButtonsContainer>\n\t\t\t\t\t\t{openDialog === true ? (\n\t\t\t\t\t\t\t<Modal>\n\t\t\t\t\t\t\t\t<h2>Are you sure you want to end the game?</h2>\n\t\t\t\t\t\t\t\t<ButtonContainer>\n\t\t\t\t\t\t\t\t\t<PrimaryButton onClick={() => setOpenDialog(false)}>\n\t\t\t\t\t\t\t\t\t\tNo, continue game\n\t\t\t\t\t\t\t\t\t</PrimaryButton>\n\t\t\t\t\t\t\t\t\t<PrimaryButton onClick={endGame}>Yes, end game</PrimaryButton>\n\t\t\t\t\t\t\t\t</ButtonContainer>\n\t\t\t\t\t\t\t</Modal>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</RoundTrackerContainer>\n\t\t\t\t</DashboardItem>\n\t\t\t\t<DashboardItem>\n\t\t\t\t\t<WorldEvents roundCounter={roundCount}></WorldEvents>\n\t\t\t\t</DashboardItem>\n\t\t\t\t<DashboardItem>\n\t\t\t\t\t<StockMarket roundCounter={roundCount}></StockMarket>\n\t\t\t\t</DashboardItem>\n\t\t\t</Grid>\n\t\t</Container>\n\t);\n};\n\nexport default Gamemaster;\n"]},"metadata":{},"sourceType":"module"}